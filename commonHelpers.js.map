{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixaday.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(query, currentPage = 1) {\n  const URL = 'https://pixabay.com/api/';\n  const API_KEY = '42600049-cf2a2f9bce39b2068dfff6d8c';\n\n  const queryUser = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  });\n\n  const LINK = `${URL}?${queryUser}`;\n\n  const response = await axios.get(LINK);\n\n  return response.data;\n}","export function renderImage(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class ='gallery-item'>\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n                width=\"360\"/>\n        </a>\n        <div class='image-info'>\n            <div class=\"info\">\n                <h3 class = \"info-likes\">Likes</h3>\n                <p>${likes}</p>\n            </div>\n            <div class=\"info\">\n                <h3 class = \"info-views\">Views</h3>\n                <p>${views}</p>\n            </div>\n            <div class=\"info\">\n                <h3 class = \"info-comments\">Comments</h3>\n                <p>${comments}</p>\n            </div>\n            <div class=\"info\">\n                <h3 class = \"info-downloads\">Downloads</h3>\n                <p>${downloads}</p>\n            </div>\n        </div>\n    </li>`\n    )\n    .join('');\n}","\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImages } from './js/pixaday';\nimport { renderImage } from './js/render-functions';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst form = document.querySelector('.form');\nconst searchInput = document.querySelector('input[name=\"search\"]');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  currentPage = 1;\n  gallery.innerHTML = '';\n\n  currentQuery = searchInput.value.trim();\n  console.log(currentQuery);\n  if (currentQuery.length === 0 || currentQuery === '') {\n    hideLoadMoreBtn();\n    warningSearchQuery();\n  } else {\n    showLoader();\n\n    async function fetchImages() {\n      try {\n        const data = await getImages(currentQuery, currentPage);\n        if (data.hits.length === 0) {\n          hideLoadMoreBtn();\n          onError();\n        }\n        console.log(data);\n        return data;\n      } catch (error) {\n        hideLoadMoreBtn();\n        console.log(error);\n      } finally {\n        hideLoader();\n        form.reset();\n      }\n    }\n\n    fetchImages().then(data => {\n      console.log(data);\n      gallery.innerHTML = renderImage(data.hits);\n\n      lightbox.refresh();\n\n      if (data.hits.length >= 15) {\n        showLoadMoreBtn();\n      }\n    });\n  }\n});\n\nloadMoreBtn.addEventListener('click', onClick);\n\nasync function onClick() {\n  try {\n    hideLoadMoreBtn();\n    showLoader();\n\n    currentPage += 1;\n\n    const res = await getImages(currentQuery, currentPage);\n\n    gallery.insertAdjacentHTML('beforeend', renderImage(res.hits));\n    lightbox.refresh();\n\n    showLoadMoreBtn();\n    smoothScroll();\n    hideLoader();\n\n    if (res.hits.length < 15) {\n      infoResult();\n      hideLoadMoreBtn();\n      hideLoader();\n    }\n  } catch (error) {\n    hideLoadMoreBtn();\n  }\n}\n\n\nfunction smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n\nfunction onError(err) {\n  console.log(err);\n  iziToast.error({\n    theme: 'dark',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: '#ffffff',\n    backgroundColor: '#ef4040',\n    position: 'topRight',\n    pauseOnHover: false,\n    progressBarColor: '#b51b1b',\n    timeout: 3000,\n  });\n}\n\n\nfunction warningSearchQuery() {\n  iziToast.warning({\n    message: 'Please enter a search query',\n    messageColor: 'black',\n    backgroundColor: '#ffac26',\n    position: 'topRight',\n    pauseOnHover: false,\n    progressBarColor: 'black',\n    timeout: 3000,\n  });\n}\n\n\nfunction infoResult() {\n  iziToast.info({\n    maxWidth: '432px',\n    messageSize: '16px',\n    titleColor: ' #fafafb',\n    messageColor: '#fff',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    closeOnEscape: true,\n    position: 'topRight',\n    backgroundColor: '#34c0eb',\n  });\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}"],"names":["getImages","query","currentPage","URL","API_KEY","queryUser","LINK","axios","renderImage","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","form","searchInput","gallery","loader","loadMoreBtn","currentQuery","event","hideLoadMoreBtn","warningSearchQuery","showLoader","fetchImages","data","onError","error","hideLoader","showLoadMoreBtn","onClick","res","smoothScroll","infoResult","galleryItemHeight","err","iziToast"],"mappings":"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"}